{"ast":null,"code":"import React from'react';import{BrowserRouter as Router,Route,Routes,Navigate}from'react-router-dom';import{useSelector}from'react-redux';import Register from'./pages/RegisterPage';import Login from'./pages/LoginPage';import AdminDashboard from'./pages/AdminDashboard';import TraderDashboard from'./pages/TraderDashboard';import HomePage from'./pages/HomePage';import'./App.css';// Ensure this path matches your CSS file location\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProtectedRoute=_ref=>{let{element:Component,allowedRoles}=_ref;const{isAuthenticated,user}=useSelector(state=>state.auth);if(!isAuthenticated){return/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true});}if(!allowedRoles.includes(user.role)){return/*#__PURE__*/_jsx(Navigate,{to:\"/\",replace:true});}return/*#__PURE__*/_jsx(Component,{});};const App=()=>{return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsx(\"div\",{className:\"app-container\",children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(HomePage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:/*#__PURE__*/_jsx(Register,{})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{})}),/*#__PURE__*/_jsx(Route,{path:\"/admin-dashboard\",element:/*#__PURE__*/_jsx(ProtectedRoute,{element:AdminDashboard,allowedRoles:['admin']})}),/*#__PURE__*/_jsx(Route,{path:\"/trader-dashboard\",element:/*#__PURE__*/_jsx(ProtectedRoute,{element:TraderDashboard,allowedRoles:['trader']})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/\",replace:true})})]})})});};export default App;","map":{"version":3,"names":["React","BrowserRouter","Router","Route","Routes","Navigate","useSelector","Register","Login","AdminDashboard","TraderDashboard","HomePage","jsx","_jsx","jsxs","_jsxs","ProtectedRoute","_ref","element","Component","allowedRoles","isAuthenticated","user","state","auth","to","replace","includes","role","App","children","className","path"],"sources":["C:/Users/PC/Documents/ecommerce-frontend/src/App.js"],"sourcesContent":["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { BrowserRouter as Router, Route, Routes, Navigate } from 'react-router-dom';\r\nimport { useSelector } from 'react-redux';\r\nimport Register from './pages/RegisterPage';\r\nimport Login from './pages/LoginPage';\r\nimport AdminDashboard from './pages/AdminDashboard';\r\nimport TraderDashboard from './pages/TraderDashboard';\r\nimport HomePage from './pages/HomePage';\r\nimport './App.css';  // Ensure this path matches your CSS file location\r\n\r\nconst ProtectedRoute = ({ element: Component, allowedRoles }) => {\r\n  const { isAuthenticated, user } = useSelector((state) => state.auth);\r\n  \r\n  if (!isAuthenticated) {\r\n    return <Navigate to=\"/login\" replace />;\r\n  }\r\n\r\n  if (!allowedRoles.includes(user.role)) {\r\n    return <Navigate to=\"/\" replace />;\r\n  }\r\n\r\n  return <Component />;\r\n};\r\n\r\nProtectedRoute.propTypes = {\r\n  element: PropTypes.elementType.isRequired,\r\n  allowedRoles: PropTypes.arrayOf(PropTypes.string).isRequired,\r\n};\r\n\r\nconst App = () => {\r\n  return (\r\n    <Router>\r\n      <div className=\"app-container\">\r\n        <Routes>\r\n          <Route path=\"/\" element={<HomePage />} />\r\n          <Route path=\"/register\" element={<Register />} />\r\n          <Route path=\"/login\" element={<Login />} />\r\n          <Route \r\n            path=\"/admin-dashboard\" \r\n            element={<ProtectedRoute element={AdminDashboard} allowedRoles={['admin']} />} \r\n          />\r\n          <Route \r\n            path=\"/trader-dashboard\" \r\n            element={<ProtectedRoute element={TraderDashboard} allowedRoles={['trader']} />} \r\n          />\r\n          <Route path=\"*\" element={<Navigate to=\"/\" replace />} />\r\n        </Routes>\r\n      </div>\r\n    </Router>\r\n  );\r\n};\r\n\r\nexport default App;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CAEzB,OAASC,aAAa,GAAI,CAAAC,MAAM,CAAEC,KAAK,CAAEC,MAAM,CAAEC,QAAQ,KAAQ,kBAAkB,CACnF,OAASC,WAAW,KAAQ,aAAa,CACzC,MAAO,CAAAC,QAAQ,KAAM,sBAAsB,CAC3C,MAAO,CAAAC,KAAK,KAAM,mBAAmB,CACrC,MAAO,CAAAC,cAAc,KAAM,wBAAwB,CACnD,MAAO,CAAAC,eAAe,KAAM,yBAAyB,CACrD,MAAO,CAAAC,QAAQ,KAAM,kBAAkB,CACvC,MAAO,WAAW,CAAG;AAAA,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAErB,KAAM,CAAAC,cAAc,CAAGC,IAAA,EAA0C,IAAzC,CAAEC,OAAO,CAAEC,SAAS,CAAEC,YAAa,CAAC,CAAAH,IAAA,CAC1D,KAAM,CAAEI,eAAe,CAAEC,IAAK,CAAC,CAAGhB,WAAW,CAAEiB,KAAK,EAAKA,KAAK,CAACC,IAAI,CAAC,CAEpE,GAAI,CAACH,eAAe,CAAE,CACpB,mBAAOR,IAAA,CAACR,QAAQ,EAACoB,EAAE,CAAC,QAAQ,CAACC,OAAO,MAAE,CAAC,CACzC,CAEA,GAAI,CAACN,YAAY,CAACO,QAAQ,CAACL,IAAI,CAACM,IAAI,CAAC,CAAE,CACrC,mBAAOf,IAAA,CAACR,QAAQ,EAACoB,EAAE,CAAC,GAAG,CAACC,OAAO,MAAE,CAAC,CACpC,CAEA,mBAAOb,IAAA,CAACM,SAAS,GAAE,CAAC,CACtB,CAAC,CAOD,KAAM,CAAAU,GAAG,CAAGA,CAAA,GAAM,CAChB,mBACEhB,IAAA,CAACX,MAAM,EAAA4B,QAAA,cACLjB,IAAA,QAAKkB,SAAS,CAAC,eAAe,CAAAD,QAAA,cAC5Bf,KAAA,CAACX,MAAM,EAAA0B,QAAA,eACLjB,IAAA,CAACV,KAAK,EAAC6B,IAAI,CAAC,GAAG,CAACd,OAAO,cAAEL,IAAA,CAACF,QAAQ,GAAE,CAAE,CAAE,CAAC,cACzCE,IAAA,CAACV,KAAK,EAAC6B,IAAI,CAAC,WAAW,CAACd,OAAO,cAAEL,IAAA,CAACN,QAAQ,GAAE,CAAE,CAAE,CAAC,cACjDM,IAAA,CAACV,KAAK,EAAC6B,IAAI,CAAC,QAAQ,CAACd,OAAO,cAAEL,IAAA,CAACL,KAAK,GAAE,CAAE,CAAE,CAAC,cAC3CK,IAAA,CAACV,KAAK,EACJ6B,IAAI,CAAC,kBAAkB,CACvBd,OAAO,cAAEL,IAAA,CAACG,cAAc,EAACE,OAAO,CAAET,cAAe,CAACW,YAAY,CAAE,CAAC,OAAO,CAAE,CAAE,CAAE,CAC/E,CAAC,cACFP,IAAA,CAACV,KAAK,EACJ6B,IAAI,CAAC,mBAAmB,CACxBd,OAAO,cAAEL,IAAA,CAACG,cAAc,EAACE,OAAO,CAAER,eAAgB,CAACU,YAAY,CAAE,CAAC,QAAQ,CAAE,CAAE,CAAE,CACjF,CAAC,cACFP,IAAA,CAACV,KAAK,EAAC6B,IAAI,CAAC,GAAG,CAACd,OAAO,cAAEL,IAAA,CAACR,QAAQ,EAACoB,EAAE,CAAC,GAAG,CAACC,OAAO,MAAE,CAAE,CAAE,CAAC,EAClD,CAAC,CACN,CAAC,CACA,CAAC,CAEb,CAAC,CAED,cAAe,CAAAG,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}